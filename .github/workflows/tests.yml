name: ğŸ§ª Unit Tests

on:
  pull_request:
    branches: [ main, main-beta ]
  push:
    branches: [ main, main-beta ]

jobs:
  run-tests:
    name: ğŸ§ª Ğ—Ğ°Ğ¿ÑƒÑĞº pytest
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ ĞšĞ»Ğ¾Ğ½ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ñ
        uses: actions/checkout@v4

      - name: ğŸ Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.12"

      - name: ğŸ“¦ Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
        run: |
          pip install --upgrade pip
          pip install -r requirements-dev.txt

      - name: ğŸ§ª Ğ—Ğ°Ğ¿ÑƒÑĞº pytest
        run: |
          echo "ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°Ñ”Ğ¼Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸..."
          pytest --maxfail=1 --disable-warnings -q
